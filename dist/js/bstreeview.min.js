/*
 @preserve
 bstreeview.js
 Version: 1.0.0
 Authors: Sami CHNITER <sami.chniter@gmail.com>
 Copyright 2020
 License: Apache License 2.0

 Project: https://github.com/chniter/bstreeview
*/
(function(a,m,n,p){function g(c,f){this.element=c;this.itemIdPrefix=c.id+"-item-";this.settings=a.extend({},l,f);this.init()}var l={expandIcon:"fa fa-angle-down",collapseIcon:"fa fa-angle-right",indent:1.25};a.extend(g.prototype,{init:function(){this.tree=[];this.nodes=[];this.settings.data&&(this.settings.data=a.parseJSON(this.settings.data),this.tree=a.extend(!0,[],this.settings.data),delete this.settings.data);a(this.element).addClass("bstreeview");this.initData({nodes:this.tree});var c=this;this.build(a(this.element),
this.tree,0);a(".bstreeview").on("click",".list-group-item",function(){a(".state-icon",this).toggleClass(c.settings.expandIcon).toggleClass(c.settings.collapseIcon)})},initData:function(c){if(c.nodes){var f=this;a.each(c.nodes,function(a,d){d.nodeId=f.nodes.length;d.parentId=c.nodeId;f.nodes.push(d);d.nodes&&f.initData(d)})}},build:function(c,f,h){var d=this,g="1.25rem;";0<h&&(g=(d.settings.indent+h*d.settings.indent).toString()+"rem;");h+=1;a.each(f,function(f,b){var e=a('<div href="#itemid" class="list-group-item" data-toggle="collapse"></div>').attr("href",
"#"+d.itemIdPrefix+b.nodeId).attr("style","padding-left:"+g);if(b.nodes){var k=a('<i class="state-icon"></i>').addClass(d.settings.collapseIcon);e.append(k)}b.icon&&(k=a('<i class="item-icon"></i>').addClass(b.icon),e.append(k));e.append(b.text);b.href&&e.attr("href",b.href);b["class"]&&e.addClass(b["class"]);b.id&&e.attr("id",b.id);jQuery.fn.extend({bstreeCollapse:function(c){var b=this.next(".list-group"),e;"show"!==c||b.hasClass("show")?"hide"===c&&b.hasClass("show")&&(e=b.collapse("hide")):e=
b.collapse("show");e&&a(".state-icon",this).toggleClass(d.settings.expandIcon).toggleClass(d.settings.collapseIcon);return this}});c.append(e);b.nodes&&(e=a('<div class="list-group collapse" id="itemid"></div>').attr("id",d.itemIdPrefix+b.nodeId),c.append(e),d.build(e,b.nodes,h))})}});a.fn.bstreeview=function(c){return this.each(function(){a.data(this,"plugin_bstreeview")||a.data(this,"plugin_bstreeview",new g(this,c))})}})(jQuery,window,document);